# ğŸš€ ç¯å¢ƒé€‚é…å¿«é€Ÿå‚è€ƒ

## âœ… å·²è§£å†³çš„ç¯å¢ƒå·®å¼‚é—®é¢˜

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ | æ–‡ä»¶ |
|------|---------|------|
| è·¯å¾„åˆ†éš”ç¬¦ä¸åŒ | `Path()` è‡ªåŠ¨å¤„ç† | `backend/config.py` |
| é¡¹ç›®æ ¹ç›®å½•ä¸åŒ | `__file__` è‡ªåŠ¨æ£€æµ‹ | `backend/config.py` |
| æ•°æ®åº“åœ°å€ä¸åŒ | ç¯å¢ƒå˜é‡ + è‡ªåŠ¨æ£€æµ‹ | `.env` + `backend/config.py` |
| æœåŠ¡å™¨ç›‘å¬åœ°å€ | æ ¹æ®ç¯å¢ƒè‡ªåŠ¨é€‰æ‹© | `backend/config.py` |
| CORS ç™½åå•ä¸åŒ | ç¯å¢ƒå˜é‡é…ç½® | `.env` |
| æ—¥å¿—çº§åˆ«ä¸åŒ | å¼€å‘DEBUGï¼Œç”Ÿäº§INFO | `backend/config.py` |

---

## ğŸ“‹ éƒ¨ç½²å‰å¿…åš 3 ä»¶äº‹

### 1ï¸âƒ£ éªŒè¯æœ¬åœ°ç¯å¢ƒ

```powershell
python scripts\deployment\validate-environment.py
```

### 2ï¸âƒ£ æµ‹è¯•é…ç½®è‡ªé€‚åº”

```powershell
python backend\config.py
```

### 3ï¸âƒ£ æ‰“åŒ…éƒ¨ç½²æ–‡ä»¶

```powershell
.\scripts\deployment\collect-deployment-files.ps1
Compress-Archive -Path deployment-package -DestinationPath blue-local-deploy.zip
```

---

## ğŸ–¥ï¸ æœåŠ¡å™¨éƒ¨ç½²æ­¥éª¤

### æ–¹æ¡ˆA: Dockerï¼ˆæ¨èï¼‰

```bash
# 1. ä¸Šä¼ å¹¶è§£å‹
scp blue-local-deploy.zip user@server:/tmp/
ssh user@server
cd /var/www && unzip /tmp/blue-local-deploy.zip
mv deployment-package blue-local && cd blue-local

# 2. é…ç½®ç¯å¢ƒ
cp .env.docker.example .env.docker
nano .env.docker  # ä¿®æ”¹å¯†ç ï¼

# 3. ä¸€é”®éƒ¨ç½²
chmod +x scripts/deployment/deploy-docker.sh
./scripts/deployment/deploy-docker.sh
```

### æ–¹æ¡ˆB: Git åŒæ­¥

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/neet821/blue-album.git /var/www/blue-local
cd /var/www/blue-local

# 2. æ‹‰å–åŒæ­¥åˆ†æ”¯
./scripts/sync/pull-shared-branch.sh

# 3. é…ç½®å¹¶éƒ¨ç½²
cp .env.example .env
nano .env  # ä¿®æ”¹é…ç½®
./scripts/deployment/deploy-docker.sh
```

---

## ğŸ”§ æœåŠ¡å™¨å¿…æ”¹é…ç½®

```bash
# .env æ–‡ä»¶å¿…æ”¹é¡¹
DB_PASSWORD=å¼ºå¯†ç 123!              # âŒ ä¸è¦ç•™ç©º
SECRET_KEY=éšæœº32å­—ç¬¦ä»¥ä¸Š            # âŒ ä¸è¦ç”¨é»˜è®¤å€¼
CORS_ORIGINS=https://yourdomain.com  # âœ… æ”¹æˆä½ çš„åŸŸå
```

---

## âœ… éƒ¨ç½²æˆåŠŸæ ‡å¿—

```bash
# 1. é…ç½®è‡ªé€‚åº”æ­£ç¡®
python3 backend/config.py
# âœ“ Environment: production
# âœ“ Platform: Linux

# 2. æ‰€æœ‰æ£€æŸ¥é€šè¿‡
python3 scripts/deployment/validate-environment.py
# âœ“ All checks passed (10/10)

# 3. æœåŠ¡æ­£å¸¸è¿è¡Œ
docker-compose ps
# âœ“ All services Up

# 4. API å“åº”æ­£å¸¸
curl http://localhost:8000/api/health
# {"status": "ok", "environment": "production"}
```

---

## ğŸ”„ æ›´æ–°éƒ¨ç½²

### æœ¬åœ°æ¨é€

```powershell
git add .
git commit -m "update: xxx"
.\scripts\sync\push-shared-branch.ps1
```

### æœåŠ¡å™¨æ›´æ–°

```bash
cd /var/www/blue-local
./scripts/sync/pull-shared-branch.sh
docker-compose up -d --build
```

---

## ğŸ†˜ å¸¸è§é—®é¢˜

| é—®é¢˜ | åŸå›  | è§£å†³ |
|------|------|------|
| æ•°æ®åº“è¿æ¥å¤±è´¥ | .env é…ç½®é”™è¯¯ | æ£€æŸ¥ DB_HOST/USER/PASSWORD |
| CORS é”™è¯¯ | åŸŸåæœªé…ç½® | ä¿®æ”¹ CORS_ORIGINS |
| ç«¯å£è¢«å ç”¨ | æœåŠ¡å†²çª | `lsof -i :8000` æŸ¥çœ‹å ç”¨ |
| æ–‡ä»¶ä¸Šä¼ å¤±è´¥ | æƒé™ä¸è¶³ | `chown -R www-data uploads/` |
| è·¯å¾„é”™è¯¯ | ç¡¬ç¼–ç è·¯å¾„ | ä½¿ç”¨ `config.PROJECT_ROOT` |

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- **å®Œæ•´æŒ‡å—**: `docs/deployment/ç¯å¢ƒé€‚é…å®Œå…¨æŒ‡å—.md`
- **éƒ¨ç½²è¯´æ˜**: `deployment-package/DEPLOYMENT_README.md`
- **é…ç½®æ–‡ä»¶**: `backend/config.py`
- **éªŒè¯è„šæœ¬**: `scripts/deployment/validate-environment.py`

---

**æ ¸å¿ƒåŸåˆ™ï¼šå†™ä¸€æ¬¡ï¼Œåˆ°å¤„è¿è¡Œï¼** ğŸ¯
