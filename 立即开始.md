# ç«‹å³å¼€å§‹ - 3åˆ†é’Ÿå¯åŠ¨æŒ‡å—

## ç¬¬ä¸€æ­¥: å®‰è£…ä¾èµ– (1åˆ†é’Ÿ)

### åç«¯ä¾èµ–
```powershell
cd backend
pip install python-socketio
```

### å‰ç«¯ä¾èµ–
```powershell
cd frontend
npm install socket.io-client
```

## ç¬¬äºŒæ­¥: åˆ›å»ºæ•°æ®åº“è¡¨ (30ç§’)

æ‰“å¼€MySQLå®¢æˆ·ç«¯æˆ–Laragonçš„phpMyAdmin,æ‰§è¡Œ:

```sql
USE blue_local;

CREATE TABLE sync_rooms (
    id INT PRIMARY KEY AUTO_INCREMENT,
    room_code VARCHAR(20) UNIQUE NOT NULL,
    room_name VARCHAR(100) NOT NULL,
    host_user_id INT NOT NULL,
    control_mode VARCHAR(20) DEFAULT 'host_only' NOT NULL,
    mode VARCHAR(20) DEFAULT 'link' NOT NULL,
    video_source TEXT,
    video_hash VARCHAR(64),
    current_time INT DEFAULT 0,
    is_playing BOOLEAN DEFAULT FALSE,
    is_active BOOLEAN DEFAULT TRUE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (host_user_id) REFERENCES users(id),
    INDEX idx_room_code (room_code)
);

CREATE TABLE sync_room_members (
    id INT PRIMARY KEY AUTO_INCREMENT,
    room_id INT NOT NULL,
    user_id INT NOT NULL,
    nickname VARCHAR(50),
    is_verified BOOLEAN DEFAULT TRUE,
    joined_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (room_id) REFERENCES sync_rooms(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users(id),
    UNIQUE KEY unique_room_member (room_id, user_id)
);

CREATE TABLE sync_room_messages (
    id INT PRIMARY KEY AUTO_INCREMENT,
    room_id INT NOT NULL,
    user_id INT NOT NULL,
    message TEXT NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (room_id) REFERENCES sync_rooms(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

## ç¬¬ä¸‰æ­¥: é‡å¯æœåŠ¡ (30ç§’)

### åœæ­¢å½“å‰æœåŠ¡
åœ¨è¿è¡Œuvicornçš„ç»ˆç«¯æŒ‰ `Ctrl+C`

### å¯åŠ¨åç«¯
```powershell
cd backend
uvicorn main:app --reload
```

### å‰ç«¯ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½
å¦‚æœæ²¡æœ‰,æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨

## ç¬¬å››æ­¥: æµ‹è¯• (1åˆ†é’Ÿ)

1. è®¿é—®: http://localhost:5173/tools/sync-room
2. ç‚¹å‡»"åˆ›å»ºæˆ¿é—´"
3. å¡«å†™:
   - æˆ¿é—´åç§°: æµ‹è¯•æˆ¿é—´
   - æ’­æ”¾æ¨¡å¼: å¤–éƒ¨é“¾æ¥
   - è§†é¢‘é“¾æ¥: https://www.w3schools.com/html/mov_bbb.mp4
   - æ§åˆ¶æ¨¡å¼: ä»…æˆ¿ä¸»æ§åˆ¶
4. ç‚¹å‡»"åˆ›å»ºæˆ¿é—´"

## æµ‹è¯•è§†é¢‘é“¾æ¥

```
https://www.w3schools.com/html/mov_bbb.mp4
https://www.w3schools.com/html/movie.mp4
```

## å®Œæˆ! ğŸ‰

ç°åœ¨å¯ä»¥:
- åˆ›å»ºæˆ¿é—´é‚€è¯·æœ‹å‹
- åŒæ­¥è§‚çœ‹è§†é¢‘
- å®æ—¶èŠå¤©äº¤æµ

## å¿«é€Ÿæ•…éšœæ’é™¤

### é—®é¢˜: pip install å¤±è´¥
```powershell
pip install python-socketio -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### é—®é¢˜: npm install å¤±è´¥
```powershell
npm install socket.io-client --registry=https://registry.npmmirror.com
```

### é—®é¢˜: æ‰¾ä¸åˆ°è¡¨
é‡æ–°æ‰§è¡Œç¬¬äºŒæ­¥çš„SQLè„šæœ¬

### é—®é¢˜: WebSocketè¿æ¥å¤±è´¥
ç¡®ä¿åç«¯åœ¨8000ç«¯å£è¿è¡Œ,æ£€æŸ¥main.pyæ˜¯å¦å·²ä¿å­˜

## åŠŸèƒ½ç‰¹æ€§

âœ… å¤–éƒ¨é“¾æ¥è§†é¢‘æ’­æ”¾
âœ… å®æ—¶æ’­æ”¾åŒæ­¥
âœ… åŒæ§åˆ¶æ¨¡å¼(æˆ¿ä¸»/å…¨å‘˜)
âœ… æ–‡å­—èŠå¤©
âœ… æˆå‘˜åˆ—è¡¨
âœ… æˆ¿é—´ç®¡ç†

å‡†å¤‡å¥½äº†! å¼€å§‹ä½¿ç”¨å§! ğŸš€
