# â±ï¸ è¯·æ±‚è¶…æ—¶æµ‹è¯•æŒ‡å—

**æµ‹è¯•ç›®æ ‡:** éªŒè¯ axios æ‹¦æˆªå™¨çš„ 10 ç§’è¶…æ—¶é…ç½®æ˜¯å¦æ­£å¸¸å·¥ä½œ  
**æµ‹è¯•æ—¶é—´:** 2025å¹´10æœˆ19æ—¥

---

## ğŸ“‹ æµ‹è¯•æ–¹æ³•

### æ–¹å¼ A: ä¿®æ”¹åç«¯æ·»åŠ å»¶è¿Ÿæ¥å£ (æ¨èç”¨äºç”Ÿäº§éªŒè¯)

#### 1. åˆ›å»ºæµ‹è¯•æ¥å£

åœ¨ `backend/main.py` ä¸­æ·»åŠ :

```python
import asyncio

@app.get("/api/test/timeout")
async def test_timeout():
    """æµ‹è¯•è¶…æ—¶æ¥å£ - å»¶è¿Ÿ 12 ç§’å“åº”"""
    await asyncio.sleep(12)  # è¶…è¿‡å‰ç«¯ 10 ç§’è¶…æ—¶è®¾ç½®
    return {"message": "å¦‚æœä½ çœ‹åˆ°è¿™æ¡æ¶ˆæ¯,è¯´æ˜æ²¡æœ‰è§¦å‘è¶…æ—¶"}
```

#### 2. æµ‹è¯•æ­¥éª¤

1. å¯åŠ¨åç«¯æœåŠ¡
2. åœ¨å‰ç«¯ä»»æ„é¡µé¢çš„ Console æ‰§è¡Œ:
   ```javascript
   import('/src/utils/request.js').then(module => {
     module.default.get('/test/timeout')
       .then(res => console.log('âœ… å“åº”:', res.data))
       .catch(err => console.error('âŒ é”™è¯¯:', err.message))
   })
   ```

#### 3. é¢„æœŸç»“æœ

- â±ï¸ **10 ç§’å** è¯·æ±‚ä¸­æ–­
- âŒ Console æ˜¾ç¤ºé”™è¯¯:
  ```
  â±ï¸ è¯·æ±‚è¶…æ—¶: Error: timeout of 10000ms exceeded
  âŒ é”™è¯¯: è¯·æ±‚è¶…æ—¶,è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•
  ```
- ğŸŒ Network æ ‡ç­¾æ˜¾ç¤º:
  - Status: `(failed)` æˆ– `ERR_TIMEOUT`
  - Type: `xhr` æˆ– `fetch`
  - Time: `~10.00s`

---

### æ–¹å¼ B: ä¸´æ—¶ä¿®æ”¹å‰ç«¯è¶…æ—¶æ—¶é—´ (å¿«é€Ÿæµ‹è¯•)

**âš ï¸ æ³¨æ„:** æµ‹è¯•å®Œæˆåéœ€è¦æ¢å¤åŸè®¾ç½®

#### 1. ä¸´æ—¶ä¿®æ”¹è¶…æ—¶æ—¶é—´

æ‰“å¼€æµè§ˆå™¨ Console,æ‰§è¡Œ:

```javascript
// ä¿å­˜åŸå§‹è¶…æ—¶æ—¶é—´
const originalTimeout = window.__requestTimeout || 10000;

// ä¿®æ”¹ä¸º 1 ç§’ (ç”¨äºå¿«é€Ÿè§¦å‘è¶…æ—¶)
import('/src/utils/request.js').then(module => {
  const request = module.default;
  request.defaults.timeout = 1000; // æ”¹ä¸º 1 ç§’
  console.log('âœ… è¶…æ—¶æ—¶é—´å·²ä¸´æ—¶è®¾ç½®ä¸º 1 ç§’');
});
```

#### 2. è§¦å‘ä»»æ„ API è¯·æ±‚

æ–¹æ³• 1 - è®¿é—®é“¾æ¥ç®¡ç† (éœ€è¦ç™»å½•):
```javascript
window.location.href = 'http://localhost:5173/tools/link-dashboard'
```

æ–¹æ³• 2 - æ‰‹åŠ¨å‘é€æµ‹è¯•è¯·æ±‚:
```javascript
import('/src/utils/request.js').then(module => {
  module.default.get('/categories')
    .then(res => console.log('âœ… å“åº”:', res.data))
    .catch(err => console.error('âŒ é”™è¯¯:', err.message))
});
```

#### 3. é¢„æœŸç»“æœ

- â±ï¸ **1 ç§’å** è¯·æ±‚è¶…æ—¶
- âŒ Console æ˜¾ç¤º:
  ```
  â±ï¸ è¯·æ±‚è¶…æ—¶: Error: timeout of 1000ms exceeded
  âŒ é”™è¯¯: è¯·æ±‚è¶…æ—¶,è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•
  ```
- ğŸŒ Network æ ‡ç­¾æ˜¾ç¤ºè¶…æ—¶é”™è¯¯

#### 4. æ¢å¤åŸè®¾ç½®

**é‡è¦:** æµ‹è¯•å®Œæˆååˆ·æ–°é¡µé¢,æˆ–æ‰‹åŠ¨æ¢å¤:

```javascript
import('/src/utils/request.js').then(module => {
  module.default.defaults.timeout = 10000; // æ¢å¤ 10 ç§’
  console.log('âœ… è¶…æ—¶æ—¶é—´å·²æ¢å¤ä¸º 10 ç§’');
});
```

æˆ–è€…ç›´æ¥åˆ·æ–°é¡µé¢: `Ctrl + Shift + R`

---

## ğŸ¯ æ›´ç®€å•çš„æµ‹è¯•æ–¹å¼ (æ¨è)

### åˆ›å»ºæµ‹è¯•é¡µé¢ç»„ä»¶

åœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨æµè§ˆå™¨çš„ç½‘ç»œé™é€ŸåŠŸèƒ½:

#### 1. æ‰“å¼€ç½‘ç»œé™é€Ÿ

1. æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
2. åˆ‡æ¢åˆ° **Network** æ ‡ç­¾
3. æ‰¾åˆ° **Throttling** ä¸‹æ‹‰èœå• (é€šå¸¸åœ¨é¡¶éƒ¨)
4. é€‰æ‹© **Slow 3G** æˆ– **Add custom profile**

#### 2. è‡ªå®šä¹‰è¶…æ…¢ç½‘ç»œ

åˆ›å»ºè‡ªå®šä¹‰é…ç½®:
- Download: `1 KB/s`
- Upload: `1 KB/s`
- Latency: `5000 ms`

#### 3. è§¦å‘è¯·æ±‚

è®¿é—®ä»»ä½•éœ€è¦åŠ è½½æ•°æ®çš„é¡µé¢,ä¾‹å¦‚:
- http://localhost:5173/tools/link-dashboard
- http://localhost:5173/posts

#### 4. è§‚å¯Ÿç»“æœ

ç”±äºç½‘ç»œææ…¢,è¯·æ±‚ä¼šåœ¨ 10 ç§’åè¶…æ—¶ã€‚

---

## ğŸ“Š æµ‹è¯•éªŒè¯æ¸…å•

### âœ… æˆåŠŸæ ‡å‡†

- [ ] **Console è¾“å‡º**
  - [ ] æ˜¾ç¤º `â±ï¸ è¯·æ±‚è¶…æ—¶:` æ—¥å¿—
  - [ ] é”™è¯¯æ¶ˆæ¯ä¸º: `"è¯·æ±‚è¶…æ—¶,è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•"`
  
- [ ] **Network é¢æ¿**
  - [ ] è¯·æ±‚çŠ¶æ€æ˜¾ç¤ºä¸º `(failed)` æˆ–çº¢è‰²
  - [ ] Time åˆ—æ˜¾ç¤ºçº¦ 10 ç§’ (æˆ–è®¾ç½®çš„è¶…æ—¶æ—¶é—´)
  - [ ] Type ä¸º `xhr` æˆ– `fetch`

- [ ] **ç”¨æˆ·ç•Œé¢**
  - [ ] é¡µé¢æ˜¾ç¤ºé”™è¯¯æç¤º (å¦‚æœæœ‰é”™è¯¯å¤„ç† UI)
  - [ ] ä¸ä¼šå‡ºç°æ— é™åŠ è½½çŠ¶æ€

- [ ] **ä»£ç è¡Œä¸º**
  - [ ] catch å—è¢«æ­£ç¡®è§¦å‘
  - [ ] error.message åŒ…å«è¶…æ—¶ç›¸å…³ä¿¡æ¯
  - [ ] ä¸å½±å“å…¶ä»–åŠŸèƒ½

### âŒ å¤±è´¥æƒ…å†µ

å¦‚æœçœ‹åˆ°ä»¥ä¸‹æƒ…å†µ,è¯´æ˜è¶…æ—¶å¤„ç†æœ‰é—®é¢˜:

- è¯·æ±‚æ°¸ä¹… pending,ä»ä¸ç»“æŸ
- è¶…è¿‡ 10 ç§’åä»åœ¨ç­‰å¾…å“åº”
- Console æ²¡æœ‰è¶…æ—¶é”™è¯¯æ—¥å¿—
- é”™è¯¯æ¶ˆæ¯ä¸å‹å¥½ (æ˜¾ç¤ºåŸå§‹é”™è¯¯ä»£ç )

---

## ğŸ§ª å®Œæ•´æµ‹è¯•è„šæœ¬

### æµ‹è¯•è„šæœ¬ 1: åŸºç¡€è¶…æ—¶æµ‹è¯•

```javascript
console.log('ğŸ§ª å¼€å§‹è¶…æ—¶æµ‹è¯•...');

// ä¸´æ—¶ä¿®æ”¹è¶…æ—¶ä¸º 2 ç§’
import('/src/utils/request.js').then(async module => {
  const request = module.default;
  const originalTimeout = request.defaults.timeout;
  
  console.log(`â° åŸå§‹è¶…æ—¶: ${originalTimeout}ms`);
  
  // è®¾ç½®ä¸º 2 ç§’
  request.defaults.timeout = 2000;
  console.log(`â° ä¸´æ—¶è¶…æ—¶: ${request.defaults.timeout}ms`);
  
  // å°è¯•è¯·æ±‚ä¸€ä¸ªä¼šå»¶è¿Ÿçš„æ¥å£
  console.log('ğŸ“¡ å‘é€æµ‹è¯•è¯·æ±‚...');
  
  try {
    // è¿™é‡Œä½¿ç”¨ä»»æ„ API æ¥å£,é…åˆç½‘ç»œé™é€Ÿå¯èƒ½è§¦å‘è¶…æ—¶
    const response = await request.get('/categories');
    console.log('âœ… è¯·æ±‚æˆåŠŸ:', response.data);
  } catch (error) {
    console.log('âŒ æ•è·é”™è¯¯:');
    console.log('  - é”™è¯¯ä»£ç :', error.code);
    console.log('  - é”™è¯¯æ¶ˆæ¯:', error.message);
    console.log('  - æ˜¯å¦è¶…æ—¶:', error.code === 'ECONNABORTED');
  }
  
  // æ¢å¤åŸè®¾ç½®
  request.defaults.timeout = originalTimeout;
  console.log(`âœ… å·²æ¢å¤è¶…æ—¶ä¸º: ${originalTimeout}ms`);
});
```

### æµ‹è¯•è„šæœ¬ 2: æ¨¡æ‹Ÿæ…¢é€Ÿ API

```javascript
console.log('ğŸ§ª å¼€å§‹æ…¢é€Ÿ API æµ‹è¯•...');

// è®¾ç½®è¶…æ—¶ä¸º 3 ç§’
import('/src/utils/request.js').then(async module => {
  const request = module.default;
  request.defaults.timeout = 3000;
  
  console.log('â±ï¸ è¶…æ—¶è®¾ç½®ä¸º 3 ç§’');
  console.log('ğŸ“¡ è¯·åœ¨ Network æ ‡ç­¾ä¸­å°†ç½‘ç»œé™é€Ÿè®¾ä¸º "Slow 3G"');
  console.log('ğŸ“¡ å‘é€è¯·æ±‚ä¸­...');
  
  const startTime = Date.now();
  
  try {
    await request.get('/categories');
    const duration = Date.now() - startTime;
    console.log(`âœ… è¯·æ±‚æˆåŠŸ,è€—æ—¶: ${duration}ms`);
  } catch (error) {
    const duration = Date.now() - startTime;
    console.log(`âŒ è¯·æ±‚å¤±è´¥,è€—æ—¶: ${duration}ms`);
    console.log(`âŒ é”™è¯¯: ${error.message}`);
  }
  
  // æ¢å¤ 10 ç§’
  request.defaults.timeout = 10000;
  console.log('âœ… è¶…æ—¶å·²æ¢å¤ä¸º 10 ç§’');
});
```

---

## ğŸ“¸ æˆªå›¾è¦æ±‚

è¯·åœ¨æµ‹è¯•æ—¶æˆªå–ä»¥ä¸‹å†…å®¹:

### 1. Console è¾“å‡º
æ˜¾ç¤º:
- `â±ï¸ è¯·æ±‚è¶…æ—¶:` æ—¥å¿—
- é”™è¯¯å¯¹è±¡è¯¦æƒ…
- è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯

### 2. Network é¢æ¿
æ˜¾ç¤º:
- è¯·æ±‚ URL
- Status: `(failed)` æˆ– `ERR_TIMEOUT`
- Time: æ¥è¿‘ 10 ç§’ (æˆ–è®¾ç½®çš„è¶…æ—¶å€¼)
- Type: `xhr` æˆ– `fetch`

### 3. é¡µé¢é”™è¯¯æç¤º (å¦‚æœæœ‰)
æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯çš„ UI ç»„ä»¶

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: æ— æ³•è§¦å‘è¶…æ—¶

**å¯èƒ½åŸå› :**
- ç½‘ç»œå¤ªå¿«,æ¥å£å“åº”æ—¶é—´ < 10 ç§’
- è¶…æ—¶æ—¶é—´è®¾ç½®æœªç”Ÿæ•ˆ

**è§£å†³æ–¹æ³•:**
1. ä½¿ç”¨ Chrome DevTools çš„ç½‘ç»œé™é€Ÿ
2. ä¸´æ—¶å°†è¶…æ—¶æ”¹ä¸º 1 ç§’: `request.defaults.timeout = 1000`
3. æˆ–ä½¿ç”¨æ–¹å¼ A åˆ›å»ºå»¶è¿Ÿæ¥å£

### é—®é¢˜ 2: è¶…æ—¶åæ²¡æœ‰å‹å¥½æç¤º

**å¯èƒ½åŸå› :**
- ç»„ä»¶çš„ catch å—æ²¡æœ‰æ˜¾ç¤º error.message
- é”™è¯¯è¢«åæ‰äº†

**è§£å†³æ–¹æ³•:**
æ£€æŸ¥è°ƒç”¨ request çš„ç»„ä»¶,ç¡®ä¿:
```javascript
try {
  await request.get('/some-api');
} catch (error) {
  // åº”è¯¥æ˜¾ç¤º error.message ç»™ç”¨æˆ·
  errorMessage.value = error.message; // âœ… æ­£ç¡®
  console.error(error); // âœ… è‡³å°‘è®°å½•æ—¥å¿—
}
```

### é—®é¢˜ 3: åˆ·æ–°åè®¾ç½®æ¶ˆå¤±

**è¿™æ˜¯æ­£å¸¸çš„!** 
- è¶…æ—¶è®¾ç½®å­˜åœ¨å†…å­˜ä¸­,åˆ·æ–°é¡µé¢ä¼šé‡ç½®
- å¦‚éœ€æ°¸ä¹…ä¿®æ”¹,ç›´æ¥ç¼–è¾‘ `request.js` ä¸­çš„ `timeout: 10000`

---

## âœ… æµ‹è¯•å®Œæˆæ£€æŸ¥è¡¨

- [ ] æ–¹å¼ A æˆ–æ–¹å¼ B è‡³å°‘å®Œæˆä¸€ç§
- [ ] Console æ˜¾ç¤ºå‹å¥½çš„è¶…æ—¶é”™è¯¯æ¶ˆæ¯
- [ ] Network é¢æ¿æ˜¾ç¤ºè¶…æ—¶çŠ¶æ€
- [ ] æˆªå›¾ä¿å­˜ Console å’Œ Network è¯æ®
- [ ] æµ‹è¯•åæ¢å¤åŸè®¾ç½® (å¦‚ä½¿ç”¨æ–¹å¼ B)
- [ ] éªŒè¯å…¶ä»– API è¯·æ±‚ä¸å—å½±å“

---

**æµ‹è¯•æ„‰å¿«! â±ï¸**
